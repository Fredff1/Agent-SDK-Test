{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/andypeng/Desktop/2025%E7%A7%8B/HCI%20/Agent-SDK-Test/src/airloop-ui/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/andypeng/Desktop/2025%E7%A7%8B/HCI%20/Agent-SDK-Test/src/airloop-ui/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-xl border border-border-subtle bg-surface-elevated/90 text-card-foreground shadow-soft backdrop-blur transition-colors duration-200\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,2KAAgB,MAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,+IACA;QAED,GAAG,KAAK;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,2KAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,2KAAgB,OAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,2KAAgB,OAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,KAAK;QAAK,WAAW,IAAA,qHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,2KAAgB,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 129, "column": 0}, "map": {"version":3,"sources":["file:///Users/andypeng/Desktop/2025%E7%A7%8B/HCI%20/Agent-SDK-Test/src/airloop-ui/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n);\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants };\n"],"names":[],"mappings":";;;;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,IAAA,0KAAG,EACvB,4JACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,6LAAC;QAAI,WAAW,IAAA,qHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE;KAJS"}},
    {"offset": {"line": 177, "column": 0}, "map": {"version":3,"sources":["file:///Users/andypeng/Desktop/2025%E7%A7%8B/HCI%20/Agent-SDK-Test/src/airloop-ui/components/panel-section.tsx"],"sourcesContent":["\"use client\";\nimport { useState } from \"react\";\nimport { ChevronDown, ChevronRight } from \"lucide-react\";\n\ninterface PanelSectionProps {\n  title: string;\n  icon: React.ReactNode;\n  children: React.ReactNode;\n}\n\nexport function PanelSection({ title, icon, children }: PanelSectionProps) {\n  const [show, setShow] = useState(true);\n\n  return (\n    <div className=\"mb-4\">\n      <h2\n        className=\"mb-3 flex cursor-pointer items-center justify-between text-xs font-semibold uppercase tracking-wide text-slate-600 transition-colors duration-200 hover:text-slate-800\"\n        onClick={() => setShow(!show)}\n      >\n        <div className=\"flex items-center\">\n          <span className=\"mr-2 rounded-md bg-brand/10 p-1.5 text-brand shadow-sm\">\n            {icon}\n          </span>\n          <span>{title}</span>\n        </div>\n        {show ? (\n          <ChevronDown className=\"h-4 w-4 text-slate-500\" />\n        ) : (\n          <ChevronRight className=\"h-4 w-4 text-slate-500\" />\n        )}\n      </h2>\n      {show && children}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;;;AAFA;;;AAUO,SAAS,aAAa,EAAE,KAAK,EAAE,IAAI,EAAE,QAAQ,EAAqB;;IACvE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IAEjC,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBACC,WAAU;gBACV,SAAS,IAAM,QAAQ,CAAC;;kCAExB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAK,WAAU;0CACb;;;;;;0CAEH,6LAAC;0CAAM;;;;;;;;;;;;oBAER,qBACC,6LAAC,sOAAW;wBAAC,WAAU;;;;;6CAEvB,6LAAC,yOAAY;wBAAC,WAAU;;;;;;;;;;;;YAG3B,QAAQ;;;;;;;AAGf;GAxBgB;KAAA"}},
    {"offset": {"line": 262, "column": 0}, "map": {"version":3,"sources":["file:///Users/andypeng/Desktop/2025%E7%A7%8B/HCI%20/Agent-SDK-Test/src/airloop-ui/components/agents-list.tsx"],"sourcesContent":["\"use client\";\n\nimport { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Bot } from \"lucide-react\";\nimport { PanelSection } from \"./panel-section\";\nimport type { Agent } from \"@/lib/types\";\n\ninterface AgentsListProps {\n  agents: Agent[];\n  currentAgent: string;\n}\n\nexport function AgentsList({ agents, currentAgent }: AgentsListProps) {\n  const activeAgent = agents.find((a) => a.name === currentAgent);\n  return (\n    <PanelSection\n      title=\"Available Agents\"\n      icon={<Bot className=\"h-4 w-4 text-brand\" />}\n    >\n      <div className=\"grid grid-cols-2 gap-3 xl:grid-cols-3\">\n        {agents.map((agent) => (\n          <Card\n            key={agent.name}\n            className={`border border-border-subtle bg-white/80 backdrop-blur transition-colors duration-200 ${\n              agent.name === currentAgent ||\n              activeAgent?.handoffs.includes(agent.name)\n                ? \"hover:border-brand/40\"\n                : \"pointer-events-none cursor-not-allowed opacity-50 grayscale\"\n            } ${\n              agent.name === currentAgent\n                ? \"border-brand/40 shadow-soft ring-1 ring-brand/30\"\n                : \"\"\n            }`}\n          >\n            <CardHeader className=\"p-3 pb-1\">\n              <CardTitle className=\"flex items-center text-sm font-semibold text-slate-800\">\n                {agent.name}\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"p-3 pt-1\">\n              <p className=\"text-xs text-slate-500\">\n                {agent.description}\n              </p>\n              {agent.name === currentAgent && (\n                <Badge className=\"mt-2 bg-brand text-brand-foreground\">\n                  Active\n                </Badge>\n              )}\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n    </PanelSection>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAaO,SAAS,WAAW,EAAE,MAAM,EAAE,YAAY,EAAmB;IAClE,MAAM,cAAc,OAAO,IAAI,CAAC,CAAC,IAAM,EAAE,IAAI,KAAK;IAClD,qBACE,6LAAC,kJAAY;QACX,OAAM;QACN,oBAAM,6LAAC,0MAAG;YAAC,WAAU;;;;;;kBAErB,cAAA,6LAAC;YAAI,WAAU;sBACZ,OAAO,GAAG,CAAC,CAAC,sBACX,6LAAC,oIAAI;oBAEH,WAAW,CAAC,qFAAqF,EAC/F,MAAM,IAAI,KAAK,gBACf,aAAa,SAAS,SAAS,MAAM,IAAI,IACrC,0BACA,8DACL,CAAC,EACA,MAAM,IAAI,KAAK,eACX,qDACA,IACJ;;sCAEF,6LAAC,0IAAU;4BAAC,WAAU;sCACpB,cAAA,6LAAC,yIAAS;gCAAC,WAAU;0CAClB,MAAM,IAAI;;;;;;;;;;;sCAGf,6LAAC,2IAAW;4BAAC,WAAU;;8CACrB,6LAAC;oCAAE,WAAU;8CACV,MAAM,WAAW;;;;;;gCAEnB,MAAM,IAAI,KAAK,8BACd,6LAAC,sIAAK;oCAAC,WAAU;8CAAsC;;;;;;;;;;;;;mBAtBtD,MAAM,IAAI;;;;;;;;;;;;;;;AAgC3B;KA1CgB"}},
    {"offset": {"line": 360, "column": 0}, "map": {"version":3,"sources":["file:///Users/andypeng/Desktop/2025%E7%A7%8B/HCI%20/Agent-SDK-Test/src/airloop-ui/components/guardrails.tsx"],"sourcesContent":["\"use client\";\n\nimport { Card, CardHeader, CardTitle, CardContent } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Shield, CheckCircle, XCircle } from \"lucide-react\";\nimport { PanelSection } from \"./panel-section\";\nimport type { GuardrailCheck } from \"@/lib/types\";\n\ninterface GuardrailsProps {\n  guardrails: GuardrailCheck[];\n  inputGuardrails: string[];\n}\n\nexport function Guardrails({ guardrails, inputGuardrails }: GuardrailsProps) {\n  const guardrailNameMap: Record<string, string> = {\n    relevance_guardrail: \"Relevance Guardrail\",\n    jailbreak_guardrail: \"Jailbreak Guardrail\",\n    \"Relevance Guardrail\": \"Relevance Guardrail\",\n    \"Jailbreak Guardrail\": \"Jailbreak Guardrail\",\n  };\n\n  const guardrailDescriptionMap: Record<string, string> = {\n    \"Relevance Guardrail\": \"Ensure messages are relevant to airline support\",\n    \"Jailbreak Guardrail\":\n      \"Detect and block attempts to bypass or override system instructions\",\n  };\n\n  const extractGuardrailName = (rawName: string): string =>\n    guardrailNameMap[rawName] ?? rawName;\n\n  const uniqueInputs = Array.from(new Set(inputGuardrails));\n\n  const guardrailsToShow: GuardrailCheck[] = uniqueInputs.map((rawName) => {\n    const existing = guardrails.find((gr) => gr.name === rawName);\n    if (existing) {\n      return existing;\n    }\n    return {\n      id: rawName,\n      name: rawName,\n      input: \"\",\n      reasoning: \"\",\n      passed: false,\n      timestamp: new Date(),\n    };\n  });\n\n  return (\n    <PanelSection\n      title=\"Guardrails\"\n      icon={<Shield className=\"h-4 w-4 text-brand\" />}\n    >\n      <div className=\"grid grid-cols-2 gap-3 xl:grid-cols-3\">\n        {guardrailsToShow.map((gr) => (\n          <Card\n            key={gr.id}\n            className={`border border-border-subtle bg-white/80 backdrop-blur transition-colors duration-200 ${\n              !gr.input ? \"opacity-60\" : \"hover:border-brand/30\"\n            }`}\n          >\n            <CardHeader className=\"p-3 pb-1\">\n              <CardTitle className=\"text-sm font-semibold text-slate-800\">\n                {extractGuardrailName(gr.name)}\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"p-3 pt-1\">\n              <p className=\"mb-1 text-xs text-slate-500\">\n                {(() => {\n                  const title = extractGuardrailName(gr.name);\n                  return guardrailDescriptionMap[title] ?? gr.input;\n                })()}\n              </p>\n              <div className=\"flex text-xs\">\n                {!gr.input || gr.passed ? (\n                  <Badge className=\"mt-2 flex items-center bg-emerald-500 px-2 py-1 text-white\">\n                    <CheckCircle className=\"mr-1 h-4 w-4 text-white\" />\n                    Passed\n                  </Badge>\n                ) : (\n                  <Badge className=\"mt-2 flex items-center bg-red-500 px-2 py-1 text-white\">\n                    <XCircle className=\"mr-1 h-4 w-4 text-white\" />\n                    Failed\n                  </Badge>\n                )}\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n    </PanelSection>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AACA;AALA;;;;;;AAaO,SAAS,WAAW,EAAE,UAAU,EAAE,eAAe,EAAmB;IACzE,MAAM,mBAA2C;QAC/C,qBAAqB;QACrB,qBAAqB;QACrB,uBAAuB;QACvB,uBAAuB;IACzB;IAEA,MAAM,0BAAkD;QACtD,uBAAuB;QACvB,uBACE;IACJ;IAEA,MAAM,uBAAuB,CAAC,UAC5B,gBAAgB,CAAC,QAAQ,IAAI;IAE/B,MAAM,eAAe,MAAM,IAAI,CAAC,IAAI,IAAI;IAExC,MAAM,mBAAqC,aAAa,GAAG,CAAC,CAAC;QAC3D,MAAM,WAAW,WAAW,IAAI,CAAC,CAAC,KAAO,GAAG,IAAI,KAAK;QACrD,IAAI,UAAU;YACZ,OAAO;QACT;QACA,OAAO;YACL,IAAI;YACJ,MAAM;YACN,OAAO;YACP,WAAW;YACX,QAAQ;YACR,WAAW,IAAI;QACjB;IACF;IAEA,qBACE,6LAAC,kJAAY;QACX,OAAM;QACN,oBAAM,6LAAC,mNAAM;YAAC,WAAU;;;;;;kBAExB,cAAA,6LAAC;YAAI,WAAU;sBACZ,iBAAiB,GAAG,CAAC,CAAC,mBACrB,6LAAC,oIAAI;oBAEH,WAAW,CAAC,qFAAqF,EAC/F,CAAC,GAAG,KAAK,GAAG,eAAe,yBAC3B;;sCAEF,6LAAC,0IAAU;4BAAC,WAAU;sCACpB,cAAA,6LAAC,yIAAS;gCAAC,WAAU;0CAClB,qBAAqB,GAAG,IAAI;;;;;;;;;;;sCAGjC,6LAAC,2IAAW;4BAAC,WAAU;;8CACrB,6LAAC;oCAAE,WAAU;8CACV,CAAC;wCACA,MAAM,QAAQ,qBAAqB,GAAG,IAAI;wCAC1C,OAAO,uBAAuB,CAAC,MAAM,IAAI,GAAG,KAAK;oCACnD,CAAC;;;;;;8CAEH,6LAAC;oCAAI,WAAU;8CACZ,CAAC,GAAG,KAAK,IAAI,GAAG,MAAM,iBACrB,6LAAC,sIAAK;wCAAC,WAAU;;0DACf,6LAAC,6OAAW;gDAAC,WAAU;;;;;;4CAA4B;;;;;;6DAIrD,6LAAC,sIAAK;wCAAC,WAAU;;0DACf,6LAAC,0NAAO;gDAAC,WAAU;;;;;;4CAA4B;;;;;;;;;;;;;;;;;;;mBAzBlD,GAAG,EAAE;;;;;;;;;;;;;;;AAoCtB;KA9EgB"}},
    {"offset": {"line": 520, "column": 0}, "map": {"version":3,"sources":["file:///Users/andypeng/Desktop/2025%E7%A7%8B/HCI%20/Agent-SDK-Test/src/airloop-ui/components/conversation-context.tsx"],"sourcesContent":["\"use client\";\n\nimport { PanelSection } from \"./panel-section\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { BookText } from \"lucide-react\";\n\ninterface ConversationContextProps {\n  context: {\n    passenger_name?: string;\n    confirmation_number?: string;\n    seat_number?: string;\n    flight_number?: string;\n    account_number?: string;\n    meal_selection?: string | null;\n  };\n}\n\nexport function ConversationContext({ context }: ConversationContextProps) {\n  const filteredEntries = Object.entries(context).filter(\n    ([key, value]) => key !== \"available_meals\" && key !== \"meal_preference\" && key != \"conversation_state\"\n  );\n\n  return (\n    <PanelSection\n      title=\"Conversation Context\"\n      icon={<BookText className=\"h-4 w-4 text-brand\" />}\n    >\n      <Card className=\"border-border-subtle bg-white/80 shadow-soft backdrop-blur\">\n        <CardContent className=\"p-3\">\n          <div className=\"grid grid-cols-2 gap-2\">\n            {filteredEntries.map(([key, value]) => (\n              <div\n                key={key}\n                className=\"flex items-center gap-2 rounded-md border border-border-subtle bg-white/90 p-2 transition-colors duration-200 hover:border-brand/30\"\n              >\n                <div className=\"h-2 w-2 rounded-full bg-brand\"></div>\n                <div className=\"text-xs\">\n                  <span className=\"text-slate-500\">{key}:</span>{\" \"}\n                  <span\n                    className={\n                      value\n                        ? \"text-slate-800\"\n                        : \"italic text-slate-400\"\n                    }\n                  >\n                    {value || \"null\"}\n                  </span>\n                </div>\n              </div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n    </PanelSection>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAiBO,SAAS,oBAAoB,EAAE,OAAO,EAA4B;IACvE,MAAM,kBAAkB,OAAO,OAAO,CAAC,SAAS,MAAM,CACpD,CAAC,CAAC,KAAK,MAAM,GAAK,QAAQ,qBAAqB,QAAQ,qBAAqB,OAAO;IAGrF,qBACE,6LAAC,kJAAY;QACX,OAAM;QACN,oBAAM,6LAAC,6NAAQ;YAAC,WAAU;;;;;;kBAE1B,cAAA,6LAAC,oIAAI;YAAC,WAAU;sBACd,cAAA,6LAAC,2IAAW;gBAAC,WAAU;0BACrB,cAAA,6LAAC;oBAAI,WAAU;8BACZ,gBAAgB,GAAG,CAAC,CAAC,CAAC,KAAK,MAAM,iBAChC,6LAAC;4BAEC,WAAU;;8CAEV,6LAAC;oCAAI,WAAU;;;;;;8CACf,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAK,WAAU;;gDAAkB;gDAAI;;;;;;;wCAAS;sDAC/C,6LAAC;4CACC,WACE,QACI,mBACA;sDAGL,SAAS;;;;;;;;;;;;;2BAbT;;;;;;;;;;;;;;;;;;;;;;;;;AAuBrB;KAtCgB"}},
    {"offset": {"line": 626, "column": 0}, "map": {"version":3,"sources":["file:///Users/andypeng/Desktop/2025%E7%A7%8B/HCI%20/Agent-SDK-Test/src/airloop-ui/components/ui/scroll-area.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-slate-300/80\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,2BAAa,2KAAgB,MAGjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,6LAAC,qLAAwB;QACvB,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,4BAA4B;QACzC,GAAG,KAAK;;0BAET,6LAAC,yLAA4B;gBAAC,WAAU;0BACrC;;;;;;0BAEH,6LAAC;;;;;0BACD,6LAAC,uLAA0B;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,qLAAwB,CAAC,WAAW;AAE7D,MAAM,0BAAY,2KAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,cAAc,UAAU,EAAE,GAAG,OAAO,EAAE,oBACpD,6LAAC,oMAAuC;QACtC,KAAK;QACL,aAAa;QACb,WAAW,IAAA,qHAAE,EACX,iDACA,gBAAgB,cACd,oDACF,gBAAgB,gBACd,sDACF;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,gMAAmC;YAAC,WAAU;;;;;;;;;;;MAjB7C;AAoBN,UAAU,WAAW,GAAG,oMAAuC,CAAC,WAAW"}},
    {"offset": {"line": 703, "column": 0}, "map": {"version":3,"sources":["file:///Users/andypeng/Desktop/2025%E7%A7%8B/HCI%20/Agent-SDK-Test/src/airloop-ui/components/runner-output.tsx"],"sourcesContent":["\"use client\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Card, CardContent, CardHeader } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport type { AgentEvent } from \"@/lib/types\";\nimport {\n  ArrowRightLeft,\n  Wrench,\n  WrenchIcon,\n  RefreshCw,\n  MessageSquareMore,\n} from \"lucide-react\";\nimport { PanelSection } from \"./panel-section\";\n\ninterface RunnerOutputProps {\n  runnerEvents: AgentEvent[];\n}\n\nfunction formatEventName(type: string) {\n  return (type.charAt(0).toUpperCase() + type.slice(1)).replace(\"_\", \" \");\n}\n\nfunction EventIcon({ type }: { type: string }) {\n  const className = \"h-4 w-4 text-slate-500\";\n  switch (type) {\n    case \"handoff\":\n      return <ArrowRightLeft className={className} />;\n    case \"tool_call\":\n      return <Wrench className={className} />;\n    case \"tool_output\":\n      return <WrenchIcon className={className} />;\n    case \"context_update\":\n      return <RefreshCw className={className} />;\n    default:\n      return null;\n  }\n}\n\nfunction EventDetails({ event }: { event: AgentEvent }) {\n  let details = null;\n  const className =\n    \"rounded-md border border-border-subtle/70 bg-slate-50/70 p-2.5 text-xs text-slate-600\";\n  switch (event.type) {\n    case \"handoff\":\n      details = event.metadata && (\n        <div className={className}>\n          <div className=\"text-slate-600\">\n            <span className=\"font-medium text-slate-600\">From:</span>{\" \"}\n            {event.metadata.source_agent}\n          </div>\n          <div className=\"text-slate-600\">\n            <span className=\"font-medium text-slate-600\">To:</span>{\" \"}\n            {event.metadata.target_agent}\n          </div>\n        </div>\n      );\n      break;\n    case \"tool_call\":\n      details = event.metadata && event.metadata.tool_args && (\n        <div className={className}>\n          <div className=\"mb-1 text-xs font-medium text-slate-600\">\n            Arguments\n          </div>\n          <pre className=\"overflow-x-auto rounded bg-slate-50/70 p-2 text-xs text-slate-600\">\n            {JSON.stringify(event.metadata.tool_args, null, 2)}\n          </pre>\n        </div>\n      );\n      break;\n    case \"tool_output\":\n      details = event.metadata && event.metadata.tool_result && (\n        <div className={className}>\n          <div className=\"mb-1 text-xs font-medium text-slate-600\">Result</div>\n          <pre className=\"overflow-x-auto rounded bg-slate-50/70 p-2 text-xs text-slate-600\">\n            {JSON.stringify(event.metadata.tool_result, null, 2)}\n          </pre>\n        </div>\n      );\n      break;\n    case \"context_update\":\n      details = event.metadata?.changes && (\n        <div className={className}>\n          {Object.entries(event.metadata.changes).map(([key, value]) => (\n            <div key={key} className=\"text-xs\">\n              <div className=\"text-slate-600\">\n                <span className=\"font-medium text-slate-600\">{key}:</span>{\" \"}\n                {value ?? \"null\"}\n              </div>\n            </div>\n          ))}\n        </div>\n      );\n      break;\n    default:\n      return null;\n  }\n\n  return (\n    <div className=\"mt-1 text-sm\">\n      {event.content && (\n        <div className=\"mb-2 font-mono text-slate-700\">{event.content}</div>\n      )}\n      {details}\n    </div>\n  );\n}\n\nfunction TimeBadge({ timestamp }: { timestamp: Date }) {\n  const date =\n    timestamp && typeof (timestamp as any)?.toDate === \"function\"\n      ? (timestamp as any).toDate()\n      : timestamp;\n  const formattedDate = new Date(date).toLocaleTimeString([], {\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n  });\n  return (\n    <Badge\n      variant=\"outline\"\n      className=\"h-5 bg-white/80 text-[10px] text-slate-500 border-border-subtle\"\n    >\n      {formattedDate}\n    </Badge>\n  );\n}\n\nexport function RunnerOutput({ runnerEvents }: RunnerOutputProps) {\n  return (\n    <div className=\"flex-1 overflow-hidden\">\n      <PanelSection title=\"Runner Output\" icon={<MessageSquareMore className=\"h-4 w-4 text-brand\" />}>\n        <ScrollArea className=\"h-[calc(100%-2rem)] rounded-xl border border-border-subtle bg-surface-muted/70\">\n        <div className=\"space-y-3 p-4\">\n          {runnerEvents.length === 0 ? (\n            <p className=\"p-4 text-center text-slate-500\">\n              No runner events yet\n            </p>\n          ) : (\n            runnerEvents.map((event) => (\n              <Card\n                key={event.id}\n                className=\"rounded-xl border border-border-subtle bg-white/85 shadow-soft\"\n              >\n                <CardHeader className=\"flex flex-row justify-between items-center p-4\">\n                  <span className=\"text-sm font-semibold text-slate-800\">\n                    {event.agent}\n                  </span>\n                  <TimeBadge timestamp={event.timestamp} />\n                </CardHeader>\n\n                <CardContent className=\"flex items-start gap-3 p-4\">\n                  <div className=\"flex items-center gap-2 rounded-full bg-slate-100/80 p-2\">\n                    <EventIcon type={event.type} />\n                    <div className=\"text-xs text-slate-600\">\n                      {formatEventName(event.type)}\n                    </div>\n                  </div>\n\n                  <div className=\"flex-1\">\n                    <EventDetails event={event} />\n                  </div>\n                </CardContent>\n              </Card>\n            ))\n          )}\n        </div>\n        </ScrollArea>\n      </PanelSection>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1090, "column": 0}, "map": {"version":3,"sources":["file:///Users/andypeng/Desktop/2025%E7%A7%8B/HCI%20/Agent-SDK-Test/src/airloop-ui/components/session-switcher.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef, useState } from \"react\";\nimport { Check, ChevronDown, MessageSquare } from \"lucide-react\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\n\nexport type SessionOption = {\n  id: string;\n  title: string;\n  subtitle?: string;\n};\n\ninterface SessionSwitcherProps {\n  sessions: SessionOption[];\n  activeSessionId: string | null;\n  onSelect: (id: string) => void;\n  onCreate: () => void;\n}\n\nexport function SessionSwitcher({\n  sessions,\n  activeSessionId,\n  onSelect,\n  onCreate,\n}: SessionSwitcherProps) {\n  const [open, setOpen] = useState(false);\n  const rootRef = useRef<HTMLDivElement>(null);\n  const activeSession =\n    sessions.find((session) => session.id === activeSessionId) ?? sessions[0];\n\n  useEffect(() => {\n    if (!open) return;\n\n    const handleClick = (event: MouseEvent) => {\n      if (!rootRef.current?.contains(event.target as Node)) {\n        setOpen(false);\n      }\n    };\n    const handleKey = (event: KeyboardEvent) => {\n      if (event.key === \"Escape\") {\n        setOpen(false);\n      }\n    };\n\n    document.addEventListener(\"mousedown\", handleClick);\n    document.addEventListener(\"keydown\", handleKey);\n\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClick);\n      document.removeEventListener(\"keydown\", handleKey);\n    };\n  }, [open]);\n\n  return (\n    <div ref={rootRef} className=\"mb-4\">\n      <div className=\"mb-3 flex items-center justify-between text-xs font-semibold uppercase tracking-wide text-slate-600\">\n        <div className=\"flex items-center gap-2\">\n          <span className=\"rounded-md bg-brand/10 p-1.5 text-brand shadow-sm\">\n            <MessageSquare className=\"h-4 w-4\" />\n          </span>\n          Session Switcher\n        </div>\n      </div>\n      <div className=\"flex items-center gap-2\">\n        <button\n          type=\"button\"\n          className=\"flex min-w-0 flex-1 items-center justify-between rounded-xl border border-border-subtle bg-white/80 px-3 py-2 text-left text-sm text-slate-800 shadow-soft transition-colors duration-200 hover:border-brand/30\"\n          onClick={() => setOpen((prev) => !prev)}\n          aria-haspopup=\"listbox\"\n          aria-expanded={open}\n        >\n          <div className=\"min-w-0\">\n            <div className=\"truncate text-sm font-semibold\">\n              {activeSession?.title || \"No sessions\"}\n            </div>\n            <div className=\"truncate text-xs text-slate-500\">\n              {activeSession?.subtitle || \"No messages yet\"}\n            </div>\n          </div>\n          <ChevronDown\n            className={`h-4 w-4 text-slate-500 transition-transform duration-200 ${\n              open ? \"rotate-180\" : \"\"\n            }`}\n          />\n        </button>\n        <button\n          type=\"button\"\n          className=\"whitespace-nowrap rounded-full border border-dashed border-border-subtle px-3 py-2 text-xs font-semibold uppercase tracking-wide text-slate-600 transition-colors duration-200 hover:border-brand/50 hover:text-slate-900\"\n          onClick={onCreate}\n        >\n          + New\n        </button>\n      </div>\n      {open && (\n        <div className=\"relative mt-2 rounded-xl border border-border-subtle bg-white/95 shadow-panel backdrop-blur\">\n          <ScrollArea className=\"max-h-64\">\n            <div className=\"p-1\" role=\"listbox\">\n              {sessions.length === 0 ? (\n                <div className=\"px-3 py-2 text-xs text-slate-500\">\n                  No sessions available\n                </div>\n              ) : (\n                sessions.map((session) => (\n                  <button\n                    key={session.id}\n                    type=\"button\"\n                    role=\"option\"\n                    aria-selected={session.id === activeSessionId}\n                    className={`flex w-full items-center gap-3 rounded-lg px-3 py-2 text-left transition-colors duration-150 ${\n                      session.id === activeSessionId\n                        ? \"bg-brand/10 text-slate-900\"\n                        : \"text-slate-700 hover:bg-slate-100\"\n                    }`}\n                    onClick={() => {\n                      onSelect(session.id);\n                      setOpen(false);\n                    }}\n                  >\n                    <div className=\"min-w-0 flex-1\">\n                      <div className=\"truncate text-sm font-semibold\">\n                        {session.title}\n                      </div>\n                      <div className=\"truncate text-xs text-slate-500\">\n                        {session.subtitle || \"No messages yet\"}\n                      </div>\n                    </div>\n                    {session.id === activeSessionId && (\n                      <Check className=\"h-4 w-4 text-brand\" />\n                    )}\n                  </button>\n                ))\n              )}\n            </div>\n          </ScrollArea>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AACA;;;AAJA;;;;AAmBO,SAAS,gBAAgB,EAC9B,QAAQ,EACR,eAAe,EACf,QAAQ,EACR,QAAQ,EACa;;IACrB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IACjC,MAAM,UAAU,IAAA,uKAAM,EAAiB;IACvC,MAAM,gBACJ,SAAS,IAAI,CAAC,CAAC,UAAY,QAAQ,EAAE,KAAK,oBAAoB,QAAQ,CAAC,EAAE;IAE3E,IAAA,0KAAS;qCAAC;YACR,IAAI,CAAC,MAAM;YAEX,MAAM;yDAAc,CAAC;oBACnB,IAAI,CAAC,QAAQ,OAAO,EAAE,SAAS,MAAM,MAAM,GAAW;wBACpD,QAAQ;oBACV;gBACF;;YACA,MAAM;uDAAY,CAAC;oBACjB,IAAI,MAAM,GAAG,KAAK,UAAU;wBAC1B,QAAQ;oBACV;gBACF;;YAEA,SAAS,gBAAgB,CAAC,aAAa;YACvC,SAAS,gBAAgB,CAAC,WAAW;YAErC;6CAAO;oBACL,SAAS,mBAAmB,CAAC,aAAa;oBAC1C,SAAS,mBAAmB,CAAC,WAAW;gBAC1C;;QACF;oCAAG;QAAC;KAAK;IAET,qBACE,6LAAC;QAAI,KAAK;QAAS,WAAU;;0BAC3B,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAK,WAAU;sCACd,cAAA,6LAAC,4OAAa;gCAAC,WAAU;;;;;;;;;;;wBACpB;;;;;;;;;;;;0BAIX,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBACC,MAAK;wBACL,WAAU;wBACV,SAAS,IAAM,QAAQ,CAAC,OAAS,CAAC;wBAClC,iBAAc;wBACd,iBAAe;;0CAEf,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAI,WAAU;kDACZ,eAAe,SAAS;;;;;;kDAE3B,6LAAC;wCAAI,WAAU;kDACZ,eAAe,YAAY;;;;;;;;;;;;0CAGhC,6LAAC,sOAAW;gCACV,WAAW,CAAC,yDAAyD,EACnE,OAAO,eAAe,IACtB;;;;;;;;;;;;kCAGN,6LAAC;wBACC,MAAK;wBACL,WAAU;wBACV,SAAS;kCACV;;;;;;;;;;;;YAIF,sBACC,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,oJAAU;oBAAC,WAAU;8BACpB,cAAA,6LAAC;wBAAI,WAAU;wBAAM,MAAK;kCACvB,SAAS,MAAM,KAAK,kBACnB,6LAAC;4BAAI,WAAU;sCAAmC;;;;;mCAIlD,SAAS,GAAG,CAAC,CAAC,wBACZ,6LAAC;gCAEC,MAAK;gCACL,MAAK;gCACL,iBAAe,QAAQ,EAAE,KAAK;gCAC9B,WAAW,CAAC,6FAA6F,EACvG,QAAQ,EAAE,KAAK,kBACX,+BACA,qCACJ;gCACF,SAAS;oCACP,SAAS,QAAQ,EAAE;oCACnB,QAAQ;gCACV;;kDAEA,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAI,WAAU;0DACZ,QAAQ,KAAK;;;;;;0DAEhB,6LAAC;gDAAI,WAAU;0DACZ,QAAQ,QAAQ,IAAI;;;;;;;;;;;;oCAGxB,QAAQ,EAAE,KAAK,iCACd,6LAAC,gNAAK;wCAAC,WAAU;;;;;;;+BAvBd,QAAQ,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCnC;GAvHgB;KAAA"}},
    {"offset": {"line": 1334, "column": 0}, "map": {"version":3,"sources":["file:///Users/andypeng/Desktop/2025%E7%A7%8B/HCI%20/Agent-SDK-Test/src/airloop-ui/components/agent-panel.tsx"],"sourcesContent":["\"use client\";\n\nimport { Bot } from \"lucide-react\";\nimport type { Agent, AgentEvent, GuardrailCheck } from \"@/lib/types\";\nimport { AgentsList } from \"./agents-list\";\nimport { Guardrails } from \"./guardrails\";\nimport { ConversationContext } from \"./conversation-context\";\nimport { RunnerOutput } from \"./runner-output\";\nimport { SessionSwitcher, type SessionOption } from \"./session-switcher\";\n\ninterface AgentPanelProps {\n  agents: Agent[];\n  currentAgent: string;\n  events: AgentEvent[];\n  guardrails: GuardrailCheck[];\n  sessions: SessionOption[];\n  activeSessionId: string | null;\n  onSelectSession: (sessionId: string) => void;\n  onCreateSession: () => void;\n  context: {\n    passenger_name?: string;\n    confirmation_number?: string;\n    seat_number?: string;\n    flight_number?: string;\n    account_number?: string;\n  };\n}\n\nexport function AgentPanel({\n  agents,\n  currentAgent,\n  events,\n  guardrails,\n  sessions,\n  activeSessionId,\n  onSelectSession,\n  onCreateSession,\n  context,\n}: AgentPanelProps) {\n  const activeAgent = agents.find((a) => a.name === currentAgent);\n  const runnerEvents = events.filter((e) => e.type !== \"message\");\n\n  return (\n    <div className=\"flex h-full flex-col overflow-hidden rounded-2xl border border-border-subtle bg-surface/85 shadow-panel backdrop-blur\">\n      <div className=\"flex min-h-[60px] items-center justify-between border-b border-border-subtle/70 bg-surface-muted/80 px-5 py-3\">\n        <div className=\"flex items-center gap-2 text-sm font-semibold uppercase tracking-wide text-slate-600\">\n          <Bot className=\"h-4 w-4 text-brand\" />\n          Agent Control\n        </div>\n        <span className=\"text-[10px] font-semibold uppercase tracking-[0.3em] text-slate-400\">\n          Ops Console\n        </span>\n      </div>\n\n      <div className=\"flex-1 min-h-0 overflow-y-auto p-5\">\n        <SessionSwitcher\n          sessions={sessions}\n          activeSessionId={activeSessionId}\n          onSelect={onSelectSession}\n          onCreate={onCreateSession}\n        />\n        <AgentsList agents={agents} currentAgent={currentAgent} />\n        <Guardrails\n          guardrails={guardrails}\n          inputGuardrails={activeAgent?.input_guardrails ?? []}\n        />\n        <ConversationContext context={context} />\n        <RunnerOutput runnerEvents={runnerEvents} />\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AACA;AACA;AACA;AARA;;;;;;;;AA4BO,SAAS,WAAW,EACzB,MAAM,EACN,YAAY,EACZ,MAAM,EACN,UAAU,EACV,QAAQ,EACR,eAAe,EACf,eAAe,EACf,eAAe,EACf,OAAO,EACS;IAChB,MAAM,cAAc,OAAO,IAAI,CAAC,CAAC,IAAM,EAAE,IAAI,KAAK;IAClD,MAAM,eAAe,OAAO,MAAM,CAAC,CAAC,IAAM,EAAE,IAAI,KAAK;IAErD,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,0MAAG;gCAAC,WAAU;;;;;;4BAAuB;;;;;;;kCAGxC,6LAAC;wBAAK,WAAU;kCAAsE;;;;;;;;;;;;0BAKxF,6LAAC;gBAAI,WAAU;;kCACb,6LAAC,wJAAe;wBACd,UAAU;wBACV,iBAAiB;wBACjB,UAAU;wBACV,UAAU;;;;;;kCAEZ,6LAAC,8IAAU;wBAAC,QAAQ;wBAAQ,cAAc;;;;;;kCAC1C,6LAAC,0IAAU;wBACT,YAAY;wBACZ,iBAAiB,aAAa,oBAAoB,EAAE;;;;;;kCAEtD,6LAAC,gKAAmB;wBAAC,SAAS;;;;;;kCAC9B,6LAAC,kJAAY;wBAAC,cAAc;;;;;;;;;;;;;;;;;;AAIpC;KA3CgB"}},
    {"offset": {"line": 1459, "column": 0}, "map": {"version":3,"sources":["file:///Users/andypeng/Desktop/2025%E7%A7%8B/HCI%20/Agent-SDK-Test/src/airloop-ui/components/seat-map.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\nimport { Card, CardContent } from \"@/components/ui/card\";\n\ninterface SeatMapProps {\n    onSeatSelect: (seatNumber: string) => void;\n    selectedSeat?: string;\n}\n\n// Define seat layout for a typical narrow-body aircraft\nconst SEAT_LAYOUT = {\n    business: { rows: [1, 2, 3, 4], seatsPerRow: ['A', 'B', 'C', 'D'] },\n    economyPlus: { rows: [5, 6, 7, 8], seatsPerRow: ['A', 'B', 'C', 'D', 'E', 'F'] },\n    economy: {\n        rows: Array.from({ length: 16 }, (_, i) => i + 9), // rows 9-24\n        seatsPerRow: ['A', 'B', 'C', 'D', 'E', 'F']\n    }\n};\n\nconst OCCUPIED_SEATS = new Set([\n    '1A', '2B', '3C', '5A', '5F', '7B', '7E', '9A', '9F', '10C', '10D',\n    '12A', '12F', '14B', '14E', '16A', '16F', '18C', '18D', '20A', '20F',\n    '22B', '22E', '24A', '24F'\n]);\n\nconst EXIT_ROWS = new Set([4, 16]);\n\nexport function SeatMap({ onSeatSelect, selectedSeat }: SeatMapProps) {\n    const getSeatStatus = (seatNumber: string) => {\n        if (OCCUPIED_SEATS.has(seatNumber)) return 'occupied';\n        if (selectedSeat === seatNumber) return 'selected';\n        return 'available';\n    };\n\n    const getSeatColor = (status: string, isExit: boolean) => {\n        // Available = emerald, Occupied = gray, Exit Row = yellow (pastel)\n        switch (status) {\n            case 'occupied':\n                return 'bg-slate-200 text-slate-400 cursor-not-allowed';\n            case 'selected':\n                return 'bg-brand text-brand-foreground cursor-pointer hover:opacity-90';\n            case 'available':\n                return isExit\n                    ? 'bg-amber-100 hover:bg-amber-200 cursor-pointer border-amber-200'\n                    : 'bg-white hover:bg-brand/10 cursor-pointer border-brand/30';\n            default:\n                return 'bg-white';\n        }\n    };\n\n    const renderSeatSection = (title: string, config: typeof SEAT_LAYOUT.business, className: string) => (\n        <div className={`mb-6 ${className}`}>\n            <h4 className=\"mb-2 text-center text-sm font-semibold text-slate-700\">{title}</h4>\n            <div className=\"space-y-1\">\n                {config.rows.map(row => {\n                    const isExitRow = EXIT_ROWS.has(row);\n                    return (\n                        <div key={row} className=\"flex items-center justify-center gap-1\">\n                            <span className=\"mr-2 w-6 text-right text-xs text-slate-500\">{row}</span>\n                            <div className=\"flex gap-1\">\n                                {config.seatsPerRow.slice(0, Math.ceil(config.seatsPerRow.length / 2)).map(letter => {\n                                    const seatNumber = `${row}${letter}`;\n                                    const status = getSeatStatus(seatNumber);\n                                    return (\n                                        <button\n                                            key={seatNumber}\n                                            className={`h-8 w-8 rounded border text-xs font-medium transition-colors ${getSeatColor(status, isExitRow)}`}\n                                            onClick={() => status === 'available' && onSeatSelect(seatNumber)}\n                                            disabled={status === 'occupied'}\n                                            title={`Seat ${seatNumber}${isExitRow ? ' (Exit Row)' : ''}${status === 'occupied' ? ' - Occupied' : ''}`}\n                                        >\n                                            {letter}\n                                        </button>\n                                    );\n                                })}\n                            </div>\n                            <div className=\"w-4\" /> {/* Aisle */}\n                            <div className=\"flex gap-1\">\n                                {config.seatsPerRow.slice(Math.ceil(config.seatsPerRow.length / 2)).map(letter => {\n                                    const seatNumber = `${row}${letter}`;\n                                    const status = getSeatStatus(seatNumber);\n                                    return (\n                                        <button\n                                            key={seatNumber}\n                                            className={`h-8 w-8 rounded border text-xs font-medium transition-colors ${getSeatColor(status, isExitRow)}`}\n                                            onClick={() => status === 'available' && onSeatSelect(seatNumber)}\n                                            disabled={status === 'occupied'}\n                                            title={`Seat ${seatNumber}${isExitRow ? ' (Exit Row)' : ''}${status === 'occupied' ? ' - Occupied' : ''}`}\n                                        >\n                                            {letter}\n                                        </button>\n                                    );\n                                })}\n                            </div>\n                        </div>\n                    );\n                })}\n            </div>\n        </div>\n    );\n\n    return (\n        <Card className=\"mx-auto my-4 w-full max-w-md border-border-subtle bg-white/90 shadow-soft\">\n            <CardContent className=\"p-4\">\n                <div className=\"text-center mb-4\">\n                    <h3 className=\"mb-2 text-lg font-semibold text-slate-800\">Select Your Seat</h3>\n                    <div className=\"flex justify-center gap-4 text-xs text-slate-600\">\n                        <div className=\"flex items-center gap-1\">\n                            <div className=\"h-3 w-3 rounded border border-brand/30 bg-white\"></div>\n                            <span>Available</span>\n                        </div>\n                        <div className=\"flex items-center gap-1\">\n                            <div className=\"h-3 w-3 rounded bg-slate-200\"></div>\n                            <span>Occupied</span>\n                        </div>\n                        <div className=\"flex items-center gap-1\">\n                            <div className=\"h-3 w-3 rounded border border-amber-200 bg-amber-100\"></div>\n                            <span>Exit Row</span>\n                        </div>\n                    </div>\n                </div>\n\n                <div className=\"space-y-4\">\n                    {renderSeatSection(\"Business Class\", SEAT_LAYOUT.business, \"border-b pb-4\")}\n                    {renderSeatSection(\"Economy Plus\", SEAT_LAYOUT.economyPlus, \"border-b pb-4\")}\n                    {renderSeatSection(\"Economy\", SEAT_LAYOUT.economy, \"\")}\n                </div>\n\n                {selectedSeat && (\n                    <div className=\"mt-4 rounded-lg bg-brand/10 p-3 text-center\">\n                        <p className=\"text-sm font-medium text-slate-800\">\n                            Selected: Seat {selectedSeat}\n                        </p>\n                    </div>\n                )}\n            </CardContent>\n        </Card>\n    );\n} \n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1812, "column": 0}, "map": {"version":3,"sources":["file:///Users/andypeng/Desktop/2025%E7%A7%8B/HCI%20/Agent-SDK-Test/src/airloop-ui/components/star-rating.tsx"],"sourcesContent":["import { useState } from \"react\";\n\ninterface StarRatingProps {\n  traceId: string;\n  onFeedback?: (traceId: string, score: number) => void;\n  showToggle?: boolean;\n  onClose?: () => void;\n}\n\nexport function StarRating({ traceId, onFeedback, showToggle = true, onClose }: StarRatingProps) {\n  const toggleable = showToggle !== false;\n  const [open, setOpen] = useState(!toggleable);\n  const [selected, setSelected] = useState<number | null>(null);\n  const [submitting, setSubmitting] = useState(false);\n\n  const handleSubmit = async () => {\n    if (!traceId || selected === null) return;\n    try {\n      setSubmitting(true);\n      await onFeedback?.(traceId, selected);\n      if (toggleable) {\n        setOpen(false);\n      }\n      onClose?.();\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  return (\n    <div className=\"mt-2\">\n      {toggleable && !open ? (\n        <button\n          type=\"button\"\n          className=\"rounded-full border border-brand/30 bg-brand/10 px-2 py-1 text-[11px] font-semibold uppercase tracking-wide text-brand transition-colors hover:bg-brand/20\"\n          onClick={() => setOpen(true)}\n        >\n          Rate\n        </button>\n      ) : (\n        <div className=\"flex items-center gap-2\">\n          <div className=\"flex gap-1\">\n        {[1, 2, 3, 4, 5].map((star) => {\n          const fillPercent = Math.max(\n            0,\n            Math.min(1, (selected ?? 0) - (star - 1))\n          );\n          return (\n            <div key={star} className=\"relative\">\n              <span className=\"text-2xl text-slate-300 select-none\"></span>\n              <span\n                className=\"absolute inset-0 overflow-hidden text-2xl text-amber-500 select-none pointer-events-none\"\n                style={{ width: `${fillPercent * 100}%` }}\n              >\n                \n              </span>\n              <div className=\"absolute inset-0 flex\">\n                <button\n                  type=\"button\"\n                  className=\"h-full w-1/2\"\n                  onClick={() => setSelected(star - 0.5)}\n                  aria-label={`Rate ${star - 0.5} stars`}\n                />\n                <button\n                  type=\"button\"\n                  className=\"h-full w-1/2\"\n                  onClick={() => setSelected(star)}\n                  aria-label={`Rate ${star} stars`}\n                />\n              </div>\n            </div>\n          );\n        })}\n      </div>\n      <button\n        type=\"button\"\n        className=\"rounded-full bg-brand px-3 py-1 text-xs font-semibold text-brand-foreground shadow-soft transition-colors hover:opacity-90 disabled:opacity-60\"\n        disabled={selected === null || submitting}\n        onClick={handleSubmit}\n      >\n        {submitting ? \"Sending...\" : \"Submit\"}\n      </button>\n          {toggleable && (\n            <button\n              type=\"button\"\n              className=\"rounded-full border border-border-subtle bg-slate-100 px-2 py-1 text-xs text-slate-600 transition-colors hover:text-slate-800\"\n              onClick={() => {\n                setOpen(false);\n                onClose?.();\n              }}\n            >\n              Cancel\n            </button>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;;;;AASO,SAAS,WAAW,EAAE,OAAO,EAAE,UAAU,EAAE,aAAa,IAAI,EAAE,OAAO,EAAmB;;IAC7F,MAAM,aAAa,eAAe;IAClC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC,CAAC;IAClC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAgB;IACxD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAE7C,MAAM,eAAe;QACnB,IAAI,CAAC,WAAW,aAAa,MAAM;QACnC,IAAI;YACF,cAAc;YACd,MAAM,aAAa,SAAS;YAC5B,IAAI,YAAY;gBACd,QAAQ;YACV;YACA;QACF,SAAU;YACR,cAAc;QAChB;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACZ,cAAc,CAAC,qBACd,6LAAC;YACC,MAAK;YACL,WAAU;YACV,SAAS,IAAM,QAAQ;sBACxB;;;;;iCAID,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;8BAChB;wBAAC;wBAAG;wBAAG;wBAAG;wBAAG;qBAAE,CAAC,GAAG,CAAC,CAAC;wBACpB,MAAM,cAAc,KAAK,GAAG,CAC1B,GACA,KAAK,GAAG,CAAC,GAAG,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC;wBAEzC,qBACE,6LAAC;4BAAe,WAAU;;8CACxB,6LAAC;oCAAK,WAAU;8CAAsC;;;;;;8CACtD,6LAAC;oCACC,WAAU;oCACV,OAAO;wCAAE,OAAO,GAAG,cAAc,IAAI,CAAC,CAAC;oCAAC;8CACzC;;;;;;8CAGD,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CACC,MAAK;4CACL,WAAU;4CACV,SAAS,IAAM,YAAY,OAAO;4CAClC,cAAY,CAAC,KAAK,EAAE,OAAO,IAAI,MAAM,CAAC;;;;;;sDAExC,6LAAC;4CACC,MAAK;4CACL,WAAU;4CACV,SAAS,IAAM,YAAY;4CAC3B,cAAY,CAAC,KAAK,EAAE,KAAK,MAAM,CAAC;;;;;;;;;;;;;2BAnB5B;;;;;oBAwBd;;;;;;8BAEF,6LAAC;oBACC,MAAK;oBACL,WAAU;oBACV,UAAU,aAAa,QAAQ;oBAC/B,SAAS;8BAER,aAAa,eAAe;;;;;;gBAE1B,4BACC,6LAAC;oBACC,MAAK;oBACL,WAAU;oBACV,SAAS;wBACP,QAAQ;wBACR;oBACF;8BACD;;;;;;;;;;;;;;;;;AAQb;GAzFgB;KAAA"}},
    {"offset": {"line": 1974, "column": 0}, "map": {"version":3,"sources":["file:///Users/andypeng/Desktop/2025%E7%A7%8B/HCI%20/Agent-SDK-Test/src/airloop-ui/components/typewriter-message.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport ReactMarkdown from \"react-markdown\";\n\ninterface TypewriterMessageProps {\n  content: string;\n  shouldAnimate: boolean;\n  onStream?: () => void;\n}\n\nexport function TypewriterMessage({\n  content,\n  shouldAnimate,\n  onStream,\n}: TypewriterMessageProps) {\n  const tokens = useMemo(() => {\n    const hasCjk = /[\\u3040-\\u30ff\\u4e00-\\u9fff]/.test(content);\n    if (hasCjk) {\n      return Array.from(content);\n    }\n    return content.split(/(\\s+)/).filter((chunk) => chunk.length > 0);\n  }, [content]);\n  const [displayed, setDisplayed] = useState(shouldAnimate ? \"\" : content);\n\n  useEffect(() => {\n    if (!shouldAnimate) {\n      setDisplayed(content);\n      return;\n    }\n\n    if (tokens.length === 0) {\n      setDisplayed(\"\");\n      return;\n    }\n\n    let index = 0;\n    setDisplayed(\"\");\n\n    let timeoutId: number | undefined;\n    const baseDelay = 50;\n    const sentencePause = 320;\n    const clausePause = 140;\n\n    const getDelay = (token: string) => {\n      const trimmed = token.trim();\n      if (/[.!?]+$/.test(trimmed)) {\n        return baseDelay + sentencePause;\n      }\n      if (/[,;]+$/.test(trimmed)) {\n        return baseDelay + clausePause;\n      }\n      return baseDelay;\n    };\n\n    const tick = () => {\n      index = Math.min(index + 1, tokens.length);\n      setDisplayed(tokens.slice(0, index).join(\"\"));\n      onStream?.();\n      if (index >= tokens.length) {\n        return;\n      }\n      timeoutId = window.setTimeout(tick, getDelay(tokens[index - 1] || \"\"));\n    };\n\n    timeoutId = window.setTimeout(tick, baseDelay);\n\n    return () => {\n      if (timeoutId) {\n        window.clearTimeout(timeoutId);\n      }\n    };\n  }, [content, shouldAnimate, tokens, onStream]);\n\n  return <ReactMarkdown>{displayed}</ReactMarkdown>;\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAWO,SAAS,kBAAkB,EAChC,OAAO,EACP,aAAa,EACb,QAAQ,EACe;;IACvB,MAAM,SAAS,IAAA,wKAAO;6CAAC;YACrB,MAAM,SAAS,+BAA+B,IAAI,CAAC;YACnD,IAAI,QAAQ;gBACV,OAAO,MAAM,IAAI,CAAC;YACpB;YACA,OAAO,QAAQ,KAAK,CAAC,SAAS,MAAM;qDAAC,CAAC,QAAU,MAAM,MAAM,GAAG;;QACjE;4CAAG;QAAC;KAAQ;IACZ,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC,gBAAgB,KAAK;IAEhE,IAAA,0KAAS;uCAAC;YACR,IAAI,CAAC,eAAe;gBAClB,aAAa;gBACb;YACF;YAEA,IAAI,OAAO,MAAM,KAAK,GAAG;gBACvB,aAAa;gBACb;YACF;YAEA,IAAI,QAAQ;YACZ,aAAa;YAEb,IAAI;YACJ,MAAM,YAAY;YAClB,MAAM,gBAAgB;YACtB,MAAM,cAAc;YAEpB,MAAM;wDAAW,CAAC;oBAChB,MAAM,UAAU,MAAM,IAAI;oBAC1B,IAAI,aAAa,IAAI,CAAC,UAAU;wBAC9B,OAAO,YAAY;oBACrB;oBACA,IAAI,YAAY,IAAI,CAAC,UAAU;wBAC7B,OAAO,YAAY;oBACrB;oBACA,OAAO;gBACT;;YAEA,MAAM;oDAAO;oBACX,QAAQ,KAAK,GAAG,CAAC,QAAQ,GAAG,OAAO,MAAM;oBACzC,aAAa,OAAO,KAAK,CAAC,GAAG,OAAO,IAAI,CAAC;oBACzC;oBACA,IAAI,SAAS,OAAO,MAAM,EAAE;wBAC1B;oBACF;oBACA,YAAY,OAAO,UAAU,CAAC,MAAM,SAAS,MAAM,CAAC,QAAQ,EAAE,IAAI;gBACpE;;YAEA,YAAY,OAAO,UAAU,CAAC,MAAM;YAEpC;+CAAO;oBACL,IAAI,WAAW;wBACb,OAAO,YAAY,CAAC;oBACtB;gBACF;;QACF;sCAAG;QAAC;QAAS;QAAe;QAAQ;KAAS;IAE7C,qBAAO,6LAAC,sMAAa;kBAAE;;;;;;AACzB;GAhEgB;KAAA"}},
    {"offset": {"line": 2075, "column": 0}, "map": {"version":3,"sources":["file:///Users/andypeng/Desktop/2025%E7%A7%8B/HCI%20/Agent-SDK-Test/src/airloop-ui/components/Chat.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useRef, useEffect, useCallback } from \"react\";\nimport type { Message } from \"@/lib/types\";\nimport { SeatMap } from \"./seat-map\";\nimport { StarRating } from \"./star-rating\";\nimport { TypewriterMessage } from \"./typewriter-message\";\n\ninterface ChatProps {\n  sessionId: string;\n  messages: Message[];\n  onSendMessage: (message: string) => void;\n  /** Whether waiting for assistant response */\n  isLoading?: boolean;\n  onFeedback?: (messageId: string, traceId: string, score: number) => void;\n}\n\nexport function Chat({\n  sessionId,\n  messages,\n  onSendMessage,\n  isLoading,\n  onFeedback,\n}: ChatProps) {\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const [inputText, setInputText] = useState(\"\");\n  const [isComposing, setIsComposing] = useState(false);\n  const [showSeatMap, setShowSeatMap] = useState(false);\n  const [selectedSeat, setSelectedSeat] = useState<string | undefined>(undefined);\n  const [ratingOpenId, setRatingOpenId] = useState<string | null>(null);\n  const animatedMessageIdsRef = useRef<Set<string>>(new Set());\n  const lastSessionIdRef = useRef<string | null>(null);\n  const [streamingMessageId, setStreamingMessageId] = useState<string | null>(null);\n\n  // Auto-scroll to bottom when messages or loading indicator change\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"instant\" });\n  }, [messages, isLoading]);\n\n  // Watch for special seat map trigger message (anywhere in list) and only if a seat has not been picked yet\n  useEffect(() => {\n    const hasTrigger = messages.some(\n      (m) => m.role === \"assistant\" && m.content === \"DISPLAY_SEAT_MAP\"\n    );\n    // Show map if trigger exists and seat not chosen yet\n    if (hasTrigger && !selectedSeat) {\n      setShowSeatMap(true);\n    }\n  }, [messages, selectedSeat]);\n\n  useEffect(() => {\n    if (lastSessionIdRef.current === sessionId) return;\n    lastSessionIdRef.current = sessionId;\n    animatedMessageIdsRef.current = new Set(messages.map((message) => message.id));\n    setStreamingMessageId(null);\n  }, [messages, sessionId]);\n\n  useEffect(() => {\n    const newAssistantMessages = messages.filter(\n      (message) =>\n        message.role === \"assistant\" &&\n        message.content !== \"DISPLAY_SEAT_MAP\" &&\n        !animatedMessageIdsRef.current.has(message.id)\n    );\n    if (newAssistantMessages.length === 0) return;\n\n    newAssistantMessages.forEach((message) =>\n      animatedMessageIdsRef.current.add(message.id)\n    );\n    const latest = newAssistantMessages[newAssistantMessages.length - 1];\n    setStreamingMessageId((prev) => (prev === latest.id ? prev : latest.id));\n  }, [messages]);\n\n  const handleStreamTick = useCallback(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"instant\" });\n  }, []);\n\n  const formatRatingValue = useCallback((score: number) => {\n    return Number.isInteger(score) ? `${score}` : score.toFixed(1);\n  }, []);\n\n  const handleSend = useCallback(() => {\n    if (!inputText.trim()) return;\n    onSendMessage(inputText);\n    setInputText(\"\");\n  }, [inputText, onSendMessage]);\n\n  const handleSeatSelect = useCallback(\n    (seat: string) => {\n      setSelectedSeat(seat);\n      setShowSeatMap(false);\n      onSendMessage(`I would like seat ${seat}`);\n    },\n    [onSendMessage]\n  );\n\n  const handleKeyDown = useCallback(\n    (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n      if (e.key === \"Enter\" && !e.shiftKey && !isComposing) {\n        e.preventDefault();\n        handleSend();\n      }\n    },\n    [handleSend, isComposing]\n  );\n\n  return (\n    <div className=\"flex min-h-0 flex-1 flex-col\">\n      {/* Messages */}\n      <div className=\"flex-1 min-h-0 overflow-y-auto px-5 pb-8 pt-4\">\n        {messages.map((msg) => {\n          if (msg.content === \"DISPLAY_SEAT_MAP\") return null; // Skip rendering marker message\n          const shouldStream =\n            msg.role === \"assistant\" && msg.id === streamingMessageId;\n          const rating = msg.rating;\n          const ratingLabel =\n            rating !== undefined\n              ? `user rate: ${formatRatingValue(rating)}`\n              : \"Rate response\";\n          return (\n            <div\n              key={msg.id}\n              className={`mb-6 flex animate-in fade-in slide-in-from-bottom-2 duration-200 ${\n                msg.role === \"user\" ? \"justify-end\" : \"justify-start\"\n              }`}\n            >\n              <div className=\"flex max-w-[78%] flex-col gap-2\">\n                <div\n                  className={`rounded-2xl px-4 py-2 text-sm leading-relaxed shadow-sm ${\n                    msg.role === \"user\"\n                      ? \"rounded-br-md bg-slate-900 text-slate-50 md:ml-12\"\n                      : \"rounded-bl-md border border-border-subtle bg-white/80 text-slate-800 md:mr-12\"\n                  }`}\n                >\n                  <TypewriterMessage\n                    content={msg.content}\n                    shouldAnimate={shouldStream}\n                    onStream={shouldStream ? handleStreamTick : undefined}\n                  />\n                </div>\n                {msg.role === \"assistant\" && msg.traceId && (\n                  <>\n                    <button\n                      type=\"button\"\n                      className=\"self-start rounded-full border border-brand/30 bg-brand/10 px-2 py-1 text-[11px] font-semibold uppercase tracking-wide text-brand transition-colors duration-200 hover:bg-brand/20\"\n                      onClick={() =>\n                        setRatingOpenId((prev) => (prev === msg.id ? null : msg.id))\n                      }\n                    >\n                      {ratingLabel}\n                    </button>\n                    {ratingOpenId === msg.id && (\n                      <div className=\"self-start rounded-xl border border-border-subtle bg-white/90 px-4 py-3 shadow-soft\">\n                        <StarRating\n                          traceId={msg.traceId}\n                          onFeedback={(traceId, score) =>\n                            onFeedback?.(msg.id, traceId, score)\n                          }\n                          showToggle={false}\n                          onClose={() => setRatingOpenId(null)}\n                        />\n                        <button\n                          type=\"button\"\n                          className=\"mt-2 text-xs text-slate-500 underline hover:text-slate-700\"\n                          onClick={() => setRatingOpenId(null)}\n                        >\n                          Close\n                        </button>\n                      </div>\n                    )}\n                  </>\n                )}\n              </div>\n            </div>\n          );\n        })}\n        {showSeatMap && (\n          <div className=\"mb-5 flex justify-start\">\n            <div className=\"mr-4 rounded-2xl md:mr-24\">\n              <SeatMap\n                onSeatSelect={handleSeatSelect}\n                selectedSeat={selectedSeat}\n              />\n            </div>\n          </div>\n        )}\n        {isLoading && (\n          <div className=\"mb-5 flex items-center gap-2 text-sm\">\n            <span className=\"h-2 w-2 animate-pulse rounded-full bg-slate-400\" />\n            <span\n              className=\"h-2 w-2 animate-pulse rounded-full bg-slate-400\"\n              style={{ animationDelay: \"0.15s\" }}\n            />\n            <span\n              className=\"h-2 w-2 animate-pulse rounded-full bg-slate-400\"\n              style={{ animationDelay: \"0.3s\" }}\n            />\n          </div>\n        )}\n        <div ref={messagesEndRef} />\n      </div>\n\n      {/* Input area */}\n      <div className=\"border-t border-border-subtle bg-surface-muted/80 px-4 py-3\">\n        <div className=\"flex items-end gap-3 rounded-2xl border border-border-subtle bg-white/90 p-3 shadow-soft transition-colors duration-200 focus-within:border-brand/40 focus-within:ring-2 focus-within:ring-brand/10\">\n          <textarea\n            id=\"prompt-textarea\"\n            tabIndex={0}\n            dir=\"auto\"\n            rows={2}\n            placeholder=\"Send a request...\"\n            className=\"min-h-[44px] flex-1 resize-none bg-transparent text-sm leading-relaxed text-slate-800 placeholder:text-slate-400 focus:outline-none\"\n            value={inputText}\n            onChange={(e) => setInputText(e.target.value)}\n            onKeyDown={handleKeyDown}\n            onCompositionStart={() => setIsComposing(true)}\n            onCompositionEnd={() => setIsComposing(false)}\n          />\n          <button\n            disabled={!inputText.trim()}\n            className=\"flex h-10 w-10 items-center justify-center rounded-full bg-brand text-brand-foreground shadow-soft transition-colors duration-200 hover:opacity-90 disabled:bg-slate-200 disabled:text-slate-400\"\n            onClick={handleSend}\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              width=\"20\"\n              height=\"20\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                fill=\"currentColor\"\n                fillRule=\"evenodd\"\n                d=\"M11.34 3.44a.9.9 0 0 1 1.32 0l7.02 7.12a.9.9 0 0 1-1.3 1.24l-5.47-5.56v13.82a.9.9 0 1 1-1.8 0V6.24L5.64 11.8a.9.9 0 0 1-1.3-1.24l7.02-7.12Z\"\n                clipRule=\"evenodd\"\n              />\n            </svg>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2439, "column": 0}, "map": {"version":3,"sources":["file:///Users/andypeng/Desktop/2025%E7%A7%8B/HCI%20/Agent-SDK-Test/src/airloop-ui/lib/api.ts"],"sourcesContent":["// Helper to call the server\nexport async function callChatAPI(message: string, conversationId: string) {\n  const res = await fetch(\"/api/chat\", {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ conversation_id: conversationId, message }),\n  });\n\n  if (!res.ok) {\n    const text = await res.text();\n    throw new Error(`Chat API error: ${res.status} ${text}`);\n  }\n\n  return res.json();\n}\n\nexport async function submitFeedback(traceId: string, score: number, comment?: string) {\n  const res = await fetch(\"/api/feedback\", {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ trace_id: traceId, score, comment }),\n  });\n\n  if (!res.ok) {\n    const text = await res.text();\n    throw new Error(`Feedback API error: ${res.status} ${text}`);\n  }\n\n  return res.json();\n}\n\nexport async function fetchSessions(limit: number = 20) {\n  const res = await fetch(`/api/sessions?limit=${limit}`);\n  if (!res.ok) {\n    const text = await res.text();\n    throw new Error(`Sessions API error: ${res.status} ${text}`);\n  }\n  return res.json();\n}\n"],"names":[],"mappings":"AAAA,4BAA4B;;;;;;;;;AACrB,eAAe,YAAY,OAAe,EAAE,cAAsB;IACvE,MAAM,MAAM,MAAM,MAAM,aAAa;QACnC,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;YAAE,iBAAiB;YAAgB;QAAQ;IAClE;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,IAAI,MAAM,CAAC,gBAAgB,EAAE,IAAI,MAAM,CAAC,CAAC,EAAE,MAAM;IACzD;IAEA,OAAO,IAAI,IAAI;AACjB;AAEO,eAAe,eAAe,OAAe,EAAE,KAAa,EAAE,OAAgB;IACnF,MAAM,MAAM,MAAM,MAAM,iBAAiB;QACvC,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;YAAE,UAAU;YAAS;YAAO;QAAQ;IAC3D;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,IAAI,MAAM,CAAC,oBAAoB,EAAE,IAAI,MAAM,CAAC,CAAC,EAAE,MAAM;IAC7D;IAEA,OAAO,IAAI,IAAI;AACjB;AAEO,eAAe,cAAc,QAAgB,EAAE;IACpD,MAAM,MAAM,MAAM,MAAM,CAAC,oBAAoB,EAAE,OAAO;IACtD,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,IAAI,MAAM,CAAC,oBAAoB,EAAE,IAAI,MAAM,CAAC,CAAC,EAAE,MAAM;IAC7D;IACA,OAAO,IAAI,IAAI;AACjB"}},
    {"offset": {"line": 2498, "column": 0}, "map": {"version":3,"sources":["file:///Users/andypeng/Desktop/2025%E7%A7%8B/HCI%20/Agent-SDK-Test/src/airloop-ui/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { ChevronLeft, Menu } from \"lucide-react\";\nimport { AgentPanel } from \"@/components/agent-panel\";\nimport { Chat } from \"@/components/Chat\";\nimport type { Agent, AgentEvent, GuardrailCheck, Message } from \"@/lib/types\";\nimport { callChatAPI, submitFeedback, fetchSessions } from \"@/lib/api\";\n\ntype Session = {\n  id: string;\n  title: string;\n  conversationId: string | null;\n  messages: Message[];\n  events: AgentEvent[];\n  agents: Agent[];\n  currentAgent: string;\n  guardrails: GuardrailCheck[];\n  context: Record<string, any>;\n  isLoading: boolean;\n  initialized: boolean;\n};\n\nconst createSession = (title: string): Session => ({\n  id: Math.random().toString(36).slice(2),\n  title,\n  conversationId: null,\n  messages: [],\n  events: [],\n  agents: [],\n  currentAgent: \"\",\n  guardrails: [],\n  context: {},\n  isLoading: false,\n  initialized: false,\n});\n\nconst normalizeGuardrails = (raw: any[]): GuardrailCheck[] =>\n  (raw || []).map((gr: any) => ({\n    id: gr.id ?? Math.random().toString(36).slice(2),\n    name: gr.name,\n    input: gr.input,\n    reasoning: gr.reasoning,\n    passed: !!gr.passed,\n    timestamp: gr.timestamp ? new Date(gr.timestamp) : new Date(),\n  }));\n\nexport default function Home() {\n  const [sessions, setSessions] = useState<Session[]>([]);\n  const [activeSessionId, setActiveSessionId] = useState<string | null>(null);\n  const [sessionCounter, setSessionCounter] = useState(1);\n  const [isAgentPanelCollapsed, setIsAgentPanelCollapsed] = useState(false);\n\n  // Load sessions from API (persistent store) first; fallback to localStorage\n  useEffect(() => {\n    (async () => {\n      try {\n        const apiSessions = await fetchSessions(50);\n        if (Array.isArray(apiSessions) && apiSessions.length > 0) {\n          const restored: Session[] = apiSessions.map((s: any, idx: number) => ({\n            id: s.conversation_id || `session-${idx}`,\n            title: s.conversation_id || `Session ${idx + 1}`,\n            conversationId: s.conversation_id || null,\n            messages: [],\n            events: [],\n            agents: [],\n            currentAgent: s.current_agent || \"\",\n            guardrails: [],\n            context: s.context || {},\n            isLoading: false,\n            initialized: true,\n          }));\n          setSessions(restored);\n          setActiveSessionId(restored[0].id);\n          setSessionCounter(restored.length);\n          return;\n        }\n      } catch (err) {\n        console.error(\"Failed to load sessions from API\", err);\n      }\n\n      try {\n        const raw = localStorage.getItem(\"airloop_sessions_v1\");\n        if (raw) {\n          const parsed = JSON.parse(raw);\n          const storedSessions: Session[] = (parsed.sessions || []).map((s: Session) => ({\n            ...s,\n            isLoading: false,\n          }));\n          if (storedSessions.length > 0) {\n            setSessions(storedSessions);\n            setActiveSessionId(parsed.activeSessionId || storedSessions[0].id);\n            setSessionCounter(parsed.sessionCounter || storedSessions.length);\n            return;\n          }\n        }\n      } catch (err) {\n        console.error(\"Failed to load sessions from storage\", err);\n      }\n      const first = createSession(\"Session 1\");\n      setSessions([first]);\n      setActiveSessionId(first.id);\n      setSessionCounter(1);\n    })();\n  }, []);\n\n  // Persist sessions to localStorage\n  useEffect(() => {\n    if (sessions.length === 0) return;\n    try {\n      localStorage.setItem(\n        \"airloop_sessions_v1\",\n        JSON.stringify({\n          sessions,\n          activeSessionId,\n          sessionCounter,\n        })\n      );\n    } catch (err) {\n      console.error(\"Failed to persist sessions\", err);\n    }\n  }, [sessions, activeSessionId, sessionCounter]);\n\n  const activeSession = sessions.find((s) => s.id === activeSessionId) ?? sessions[0];\n  const sessionOptions = sessions.map((session) => {\n    const userChunks = session.messages\n      .filter(\n        (message) =>\n          message.role === \"user\" && message.content !== \"DISPLAY_SEAT_MAP\"\n      )\n      .map((message) => message.content.replace(/\\s+/g, \" \").trim())\n      .filter(Boolean);\n    const normalized = userChunks.join(\" / \").trim();\n    const maxLength = 40;\n    const chars = Array.from(normalized);\n    const summary = chars.slice(0, maxLength).join(\"\");\n    const subtitle = normalized\n      ? chars.length > maxLength\n        ? `${summary}...`\n        : summary\n      : \"\";\n    return {\n      id: session.id,\n      title: session.title,\n      subtitle,\n    };\n  });\n\n  // Boot the conversation for new sessions only\n  useEffect(() => {\n    if (!activeSessionId) return;\n    const session = sessions.find((s) => s.id === activeSessionId);\n    if (!session || session.initialized || session.isLoading) return;\n\n    const bootSession = async (sessionId: string) => {\n    setSessions((prev) =>\n      prev.map((s) =>\n        s.id === sessionId ? { ...s, isLoading: true } : s\n      )\n    );\n      let data: any = null;\n      try {\n        data = await callChatAPI(\"\", \"\");\n      } catch (err) {\n        console.error(\"Failed to start conversation\", err);\n      }\n      if (!data) {\n        setSessions((prev) =>\n          prev.map((s) =>\n            s.id === sessionId ? { ...s, isLoading: false, initialized: true } : s\n          )\n        );\n        return;\n      }\n      setSessions((prev) =>\n        prev.map((s) =>\n          s.id === sessionId\n            ? {\n                ...s,\n                conversationId: data.conversation_id,\n                currentAgent: data.current_agent,\n                context: data.context,\n                events: (data.events || []).map((e: any) => ({\n                  ...e,\n                  timestamp: e.timestamp ?? Date.now(),\n                })),\n                agents: data.agents || [],\n                guardrails: normalizeGuardrails(data.guardrails),\n                messages: Array.isArray(data.messages)\n                  ? data.messages.map((m: any) => ({\n                      id: Date.now().toString() + Math.random().toString(),\n                      content: m.content,\n                      role: \"assistant\",\n                      agent: m.agent,\n                      traceId: data.trace_id,\n                      timestamp: new Date(),\n                    }))\n                  : [],\n                isLoading: false,\n                initialized: true,\n              }\n            : s\n        )\n      );\n    };\n\n    bootSession(activeSessionId);\n  }, [activeSessionId, sessions]);\n\n  // Send a user message\n  const handleSendMessage = async (content: string) => {\n    const session = sessions.find((s) => s.id === activeSessionId);\n    if (!session) return;\n\n    const userMsg: Message = {\n      id: Date.now().toString(),\n      content,\n      role: \"user\",\n      timestamp: new Date(),\n    };\n\n    setSessions((prev) =>\n      prev.map((s) =>\n        s.id === activeSessionId\n          ? { ...s, messages: [...s.messages, userMsg], isLoading: true }\n          : s\n      )\n    );\n\n    let data: any = null;\n    try {\n      data = await callChatAPI(content, session.conversationId ?? \"\");\n    } catch (err) {\n      console.error(\"Failed to send message\", err);\n      setSessions((prev) =>\n        prev.map((s) =>\n          s.id === activeSessionId ? { ...s, isLoading: false } : s\n        )\n      );\n      return;\n    }\n\n    if (!data) {\n      setSessions((prev) =>\n        prev.map((s) =>\n          s.id === activeSessionId ? { ...s, isLoading: false } : s\n        )\n      );\n      return;\n    }\n\n    setSessions((prev) =>\n      prev.map((s) => {\n        if (s.id !== activeSessionId) return s;\n        const stampedEvents = data.events\n          ? data.events.map((e: any) => ({\n              ...e,\n              timestamp: e.timestamp ?? Date.now(),\n            }))\n          : [];\n        const responses: Message[] = data.messages\n          ? data.messages.map((m: any) => ({\n              id: Date.now().toString() + Math.random().toString(),\n              content: m.content,\n              role: \"assistant\",\n              agent: m.agent,\n              traceId: data.trace_id,\n              timestamp: new Date(),\n            }))\n          : [];\n        return {\n          ...s,\n          conversationId: s.conversationId || data.conversation_id,\n          currentAgent: data.current_agent,\n          context: data.context,\n          events: [...s.events, ...stampedEvents],\n          agents: data.agents || s.agents,\n          guardrails: normalizeGuardrails(data.guardrails) || s.guardrails,\n          messages: [...s.messages, ...responses],\n          isLoading: false,\n        };\n      })\n    );\n  };\n\n  const handleFeedback = async (\n    messageId: string,\n    traceId: string,\n    score: number\n  ) => {\n    setSessions((prev) =>\n      prev.map((s) => ({\n        ...s,\n        messages: s.messages.map((m) =>\n          m.id === messageId ? { ...m, rating: score } : m\n        ),\n      }))\n    );\n    if (!traceId) return;\n    try {\n      await submitFeedback(traceId, score);\n    } catch (err) {\n      console.error(\"Failed to submit feedback\", err);\n    }\n  };\n\n  const moveToFront = (sid: string) => {\n    setSessions((prev) => {\n      const target = prev.find((s) => s.id === sid);\n      if (!target) return prev;\n      const rest = prev.filter((s) => s.id !== sid);\n      return [target, ...rest];\n    });\n  };\n\n  const handleSelectSession = (sid: string) => {\n    setActiveSessionId(sid);\n    moveToFront(sid);\n  };\n\n  const handleCreateSession = () => {\n    const next = sessionCounter + 1;\n    const newSession = createSession(`Session ${next}`);\n    setSessionCounter(next);\n    setSessions((prev) => [newSession, ...prev]);\n    setActiveSessionId(newSession.id);\n  };\n\n  if (!activeSession) {\n    return <main className=\"p-4 text-sm text-slate-500\">Loading sessions...</main>;\n  }\n\n  return (\n    <main className=\"h-screen overflow-hidden p-4 flex-shrink-0\">\n      <div\n        className={`flex h-full flex-col lg:flex-row ${\n          isAgentPanelCollapsed ? \"gap-0\" : \"gap-4\"\n        }`}\n      >\n        <div\n          className={`flex-shrink-0 overflow-hidden transition-[width,height,opacity] duration-300 ease-in-out lg:h-full ${\n            isAgentPanelCollapsed\n              ? \"h-0 opacity-0 lg:w-0\"\n              : \"h-[45%] opacity-100 lg:w-[42%]\"\n          }`}\n        >\n          <div className=\"h-full w-full lg:min-w-[320px]\">\n            <AgentPanel\n              agents={activeSession?.agents || []}\n              currentAgent={activeSession?.currentAgent || \"\"}\n              events={activeSession?.events || []}\n              guardrails={activeSession?.guardrails || []}\n              context={activeSession?.context || {}}\n              sessions={sessionOptions}\n              activeSessionId={activeSessionId}\n              onSelectSession={handleSelectSession}\n              onCreateSession={handleCreateSession}\n            />\n          </div>\n        </div>\n        <div\n          className={`flex flex-1 flex-col overflow-hidden rounded-2xl border border-border-subtle bg-surface/85 shadow-panel backdrop-blur ${\n            isAgentPanelCollapsed\n              ? \"h-full lg:mx-auto lg:max-w-[85%]\"\n              : \"h-[55%] lg:h-full\"\n          }`}\n        >\n          <div className=\"flex min-h-[60px] items-center gap-3 border-b border-border-subtle/70 bg-surface-muted/80 px-4 py-3 backdrop-blur\">\n            <button\n              type=\"button\"\n              className=\"flex h-9 w-9 items-center justify-center rounded-full border border-border-subtle bg-white/80 text-slate-600 shadow-soft transition-colors duration-200 hover:border-brand/40 hover:text-slate-900\"\n              onClick={() => setIsAgentPanelCollapsed((prev) => !prev)}\n              aria-label={\n                isAgentPanelCollapsed ? \"Show agent control\" : \"Hide agent control\"\n              }\n              aria-pressed={isAgentPanelCollapsed}\n            >\n              {isAgentPanelCollapsed ? (\n                <Menu className=\"h-4 w-4\" />\n              ) : (\n                <ChevronLeft className=\"h-4 w-4\" />\n              )}\n            </button>\n            <div className=\"min-w-0 flex-1\">\n              <div className=\"truncate text-sm font-semibold text-slate-800\">\n                {activeSession?.title || \"Session\"}\n              </div>\n            </div>\n            {activeSession?.conversationId && (\n              <span className=\"hidden whitespace-nowrap rounded-full border border-border-subtle bg-white/80 px-3 py-1 text-xs font-medium text-slate-500 sm:inline-flex\">\n                ID: {activeSession.conversationId}\n              </span>\n            )}\n          </div>\n          <Chat\n            sessionId={activeSession?.id || \"\"}\n            messages={activeSession?.messages || []}\n            onSendMessage={handleSendMessage}\n            onFeedback={handleFeedback}\n            isLoading={activeSession?.isLoading}\n          />\n        </div>\n      </div>\n    </main>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}